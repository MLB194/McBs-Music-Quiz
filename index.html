<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Spotify Trivia Game</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
let songIds = [
"3n3Ppam7vgaVa1iaRUc9Lp", // Example song 1
"4uLU6hMCjMI75M1A2tKUQC", // Example song 2
// Add your existing songs here...
];

// Function to add a Spotify playlist's tracks to the song list
function addPlaylistToGame(playlistUrl) {
const playlistId = playlistUrl.split('/').pop().split('?')[0]; // Extract playlist ID from URL
const apiUrl = `https://api.spotify.com/v1/playlists/${playlistId}/tracks`;

// Get playlist tracks using Spotify API
fetch(apiUrl, {
method: 'GET',
headers: {
'Authorization': `Bearer YOUR_SPOTIFY_ACCESS_TOKEN`, // You'll need to get a valid token
}
})
.then(response => response.json())
.then(data => {
const newSongIds = data.items.map(item => item.track.id);
songIds = songIds.concat(newSongIds); // Add the new song IDs to the list
alert("Playlist added successfully!");
})
.catch(error => alert("Error adding playlist: " + error));
}

// Function to pick a random song from the list and redirect to it
function playRandomSong() {
const randomSongId = songIds[Math.floor(Math.random() * songIds.length)];
setTimeout(function () {
window.location.href = `https://open.spotify.com/track/${randomSongId}`;
}, 3000); // 3-second delay
}
</script>
</head>
<body>
<h1>Welcome to the Spotify Trivia Game!</h1>

<div>
<button onclick="document.getElementById('playlistModal').style.display='block'">Add a Spotify Playlist to the Game</button>
</div>

<div>
<button onclick="playRandomSong()">Play a Random Song</button>
</div>

<!-- Modal for adding playlist URL -->
<div id="playlistModal" style="display:none; padding: 20px; background-color: #f4f4f4; border: 1px solid #ddd;">
<h2>Enter Spotify Playlist URL</h2>
<input type="text" id="playlistUrl" placeholder="Enter Playlist URL">
<button onclick="addPlaylistToGame(document.getElementById('playlistUrl').value)">Add Playlist</button>
<button onclick="document.getElementById('playlistModal').style.display='none'">Close</button>
</div>

</body>
</html>
